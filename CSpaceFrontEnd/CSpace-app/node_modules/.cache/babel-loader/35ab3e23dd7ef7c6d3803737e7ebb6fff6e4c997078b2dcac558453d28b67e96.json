{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project Management\\\\CSpaceFrontEnd\\\\my-app\\\\src\\\\components\\\\ChatTab.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../config/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatTab = ({\n  projectId,\n  messages,\n  user,\n  onRefresh\n}) => {\n  _s();\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    setLoading(true);\n    try {\n      await api.post('/api/messages/send', {\n        senderId: user.id,\n        projectId: projectId,\n        content: newMessage\n      });\n      setNewMessage('');\n      onRefresh();\n    } catch (err) {\n      console.error('Error sending message:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-96\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto space-y-3 mb-4 p-4 bg-gray-50 rounded\",\n      children: [messages.map(msg => {\n        var _msg$sender, _msg$sender2, _msg$sender3, _msg$sender4, _msg$sender5;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${((_msg$sender = msg.sender) === null || _msg$sender === void 0 ? void 0 : _msg$sender.id) === user.id ? 'justify-end' : 'justify-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xs px-4 py-2 rounded-lg ${((_msg$sender2 = msg.sender) === null || _msg$sender2 === void 0 ? void 0 : _msg$sender2.id) === user.id ? 'bg-blue-600 text-white' : 'bg-white text-gray-900 border border-gray-200'}`,\n            children: [((_msg$sender3 = msg.sender) === null || _msg$sender3 === void 0 ? void 0 : _msg$sender3.id) !== user.id && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs font-semibold mb-1 opacity-75\",\n              children: (_msg$sender4 = msg.sender) === null || _msg$sender4 === void 0 ? void 0 : _msg$sender4.fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: msg.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-xs mt-1 ${((_msg$sender5 = msg.sender) === null || _msg$sender5 === void 0 ? void 0 : _msg$sender5.id) === user.id ? 'text-blue-100' : 'text-gray-500'}`,\n              children: new Date(msg.createdAt).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this)\n        }, msg.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this);\n      }), messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center text-gray-500 py-12\",\n        children: \"No messages yet. Start the conversation!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSendMessage,\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value),\n        placeholder: \"Type your message...\",\n        className: \"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\",\n        children: loading ? 'Sending...' : 'Send'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatTab, \"MNqqLvEPjDkr12oSs41F4lETFCA=\");\n_c = ChatTab;\nexport default ChatTab;\nvar _c;\n$RefreshReg$(_c, \"ChatTab\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsxDEV","_jsxDEV","ChatTab","projectId","messages","user","onRefresh","_s","newMessage","setNewMessage","loading","setLoading","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","e","preventDefault","trim","post","senderId","id","content","err","console","error","className","children","map","msg","_msg$sender","_msg$sender2","_msg$sender3","_msg$sender4","_msg$sender5","sender","fullName","fileName","_jsxFileName","lineNumber","columnNumber","Date","createdAt","toLocaleTimeString","length","ref","onSubmit","type","value","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/Project Management/CSpaceFrontEnd/my-app/src/components/ChatTab.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../config/api';\r\n\r\nconst ChatTab = ({ projectId, messages, user, onRefresh }) => {\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      await api.post('/api/messages/send', {\r\n        senderId: user.id,\r\n        projectId: projectId,\r\n        content: newMessage\r\n      });\r\n      setNewMessage('');\r\n      onRefresh();\r\n    } catch (err) {\r\n      console.error('Error sending message:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-96\">\r\n      <div className=\"flex-1 overflow-y-auto space-y-3 mb-4 p-4 bg-gray-50 rounded\">\r\n        {messages.map((msg) => (\r\n          <div\r\n            key={msg.id}\r\n            className={`flex ${msg.sender?.id === user.id ? 'justify-end' : 'justify-start'}`}\r\n          >\r\n            <div\r\n              className={`max-w-xs px-4 py-2 rounded-lg ${\r\n                msg.sender?.id === user.id\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-white text-gray-900 border border-gray-200'\r\n              }`}\r\n            >\r\n              {msg.sender?.id !== user.id && (\r\n                <div className=\"text-xs font-semibold mb-1 opacity-75\">\r\n                  {msg.sender?.fullName}\r\n                </div>\r\n              )}\r\n              <p className=\"text-sm\">{msg.content}</p>\r\n              <div className={`text-xs mt-1 ${msg.sender?.id === user.id ? 'text-blue-100' : 'text-gray-500'}`}>\r\n                {new Date(msg.createdAt).toLocaleTimeString()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {messages.length === 0 && (\r\n          <div className=\"text-center text-gray-500 py-12\">\r\n            No messages yet. Start the conversation!\r\n          </div>\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      <form onSubmit={handleSendMessage} className=\"flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          value={newMessage}\r\n          onChange={(e) => setNewMessage(e.target.value)}\r\n          placeholder=\"Type your message...\"\r\n          className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\r\n        >\r\n          {loading ? 'Sending...' : 'Send'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatTab;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}